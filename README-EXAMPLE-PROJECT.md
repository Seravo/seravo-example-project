# Seravo example project

Seravo example project goal is to showcase more realistic project using WordPress community tools as much as possible:

- [@wordpress/scripts](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/) is used for assets bundling.
- [NPM workspaces](https://docs.npmjs.com/cli/v7/using-npm/workspaces) is used for running assets bundling from the root of the project for all assets.
- Example blocks plugin is generated by [@wordpress/create-block](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-create-block/).
- Example theme is modified 2025 theme.

## @wordpress/scripts and NPM workspaces.

[@wordpress/scripts](https://www.npmjs.com/package/@wordpress/scripts) is a collection of reusable scripts tailored for WordPress development powered by Webpack. It's used for assets bundling in your project.

Together with [NPM workspaces](https://docs.npmjs.com/cli/v7/using-npm/workspaces) it can handle all assets bundling from the root of the project.

In the root `package.json` we have defined two workspaces (custom blocks plugin and custom theme):

```json
"workspaces": [
    "htdocs/wp-content/plugins/example-blocks",
    "htdocs/wp-content/themes/example-theme"
]
 ```

 But you can add any number of new workspaces, for example child theme:

 ```json
"workspaces": [
    "htdocs/wp-content/plugins/example-blocks",
    "htdocs/wp-content/themes/example-theme",
    "htdocs/wp-content/themes/example-child-theme"
]
 ```

The idea is that all the workspaces work independently even if they would be moved outside of this project.

### Running NPM commands from the root

By running a command using the `-w` option, it's possible to run the given command in the context of that specific workspace. e.g:

```
npm run build -w=example-blocks
```

This will run the `build` script defined within the `./htdocs/wp-content/plugins/example-blocks/package.json` file.

Note that `name` property in the workspace `package.json` need to match `-w`option.

- For example `example-blocks` is used in 
    - `npm run build -w=example-blocks`
    - `name` property in `./htdocs/wp-content/plugins/example-blocks/package.json` file 
- For example `example-theme` is used in 
    - `npm run build -w=example-theme`
    - `name` property in `./htdocs/wp-content/themes/example-theme/package.json` file
- Follow the same pattern for new workspaces

### `--workspaces` option

It's also possible to use `workspaces` (plural) option to run same NPM script for all workspaces.

For example run `lint:css` in all workspaces:
```
npm run lint:css --workspaces
```

Note that `workspaces` option doesn't seem to work with `start` script. Therefore [npm-run-all](https://www.npmjs.com/package/npm-run-all) package is used for `start` script:

```
run-p start:blocks start:theme
```